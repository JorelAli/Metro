cmake_minimum_required (VERSION 2.6)
project (Metro)

set(libgitDir $ENV{LIBGIT_PATH})
IF (NOT DEFINED libgitDir)
    message(SEND_ERROR "Environment variable LIBGIT_PATH is not set")
ENDIF()

include_directories("${libgitDir}/include")
include_directories("include")
add_executable(metro src/main.cpp)
add_library(git2 STATIC IMPORTED)

IF (WIN32)
    set_target_properties(git2 PROPERTIES IMPORTED_LOCATION "${libgitDir}/cmake-build-debug/git2.lib")
    target_link_libraries(metro git2 winhttp Rpcrt4 crypt32)
ENDIF()
IF (UNIX)
    set_target_properties(git2 PROPERTIES IMPORTED_LOCATION "${libgitDir}/build/libgit2.a")
    target_link_libraries(metro git2 pthread z ssl crypto)
ENDIF()
